angular.module("myApp",["ngRoute","ngCookies","ngMessages","ngSanitize","afkl.lazyImage","satellizer","ngFileUpload","authModApp","app.common","app.home","app.store","ngMaterial","app.review","app.product","app.user"]).config(["$routeProvider","$mdThemingProvider",function(e,t){t.theme("default").primaryPalette("brown").accentPalette("yellow").warnPalette("orange"),e.otherwise({redirectTo:"/home"})}]),function(e){"use strict";function t(e,t,o){e.when("/signup",{templateUrl:"app/authentication/views/register.html",controller:"RegisterCtrl",controllerAs:"rcl"}).when("/logout",{controller:"LogoutCtrl"}).when("/login",{templateUrl:"app/authentication/views/login.html",controller:"LoginController",controllerAs:"login"}),o.loginUrl="https://shoppinss.herokuapp.com/authenticate/login",o.signupUrl="https://shoppinss.herokuapp.com/authenticate/signup",o.facebook({clientId:"1068203956594250",url:"https://shoppinss.herokuapp.com/authenticate/auth/facebook"})}e.module("authModApp",["ngCookies","ngRoute","satellizer"]).config(["$routeProvider","$httpProvider","$authProvider",t])}(window.angular),function(e){"use strict";e.module("app.common",[])}(window.angular),function(e){function t(e){e.when("/home",{templateUrl:"app/home/homePage.html",controller:"HomeController",controllerAs:"hm"})}e.module("app.home",[]).config(["$routeProvider",t])}(window.angular),angular.module("app.product",[]).config(["$routeProvider",function(e){e.when("/productsCollectionName/:productName/:location/:slug?",{templateUrl:"app/product/views/productsNameCollection.html",controller:"ProductNameCollectionController",controllerAs:"pncc"}).when("/productsCollectionCategory/:category/:location/:slug?",{templateUrl:"app/product/views/productsCategoryCollection.html",controller:"ProductCategoryCollectionController",controllerAs:"pccc"}).when("/productsCollectionSubCategory/:subCategory/:location/:slug?",{templateUrl:"app/product/views/productsSubCategoryCollection.html",controller:"ProductSubCategoryCollectionController",controllerAs:"pscc"}).when("/product/singleProduct/:productId/:slug?",{templateUrl:"app/product/views/singleProduct.html",controller:"SingleProductController",controllerAs:"spc"}).when("/productsCollectionLocation/:location/:slug?",{templateUrl:"app/product/views/productsLocationCollection.html",controller:"ProductsLocationController",controllerAs:"plc"})}]),function(e){"use strict";e.module("app.review",[])}(window.angular),angular.module("app.store",[]).config(["$routeProvider",function(e){e.when("/store",{templateUrl:"app/store/storePost.html",controller:"StoreController",controllerAs:"sm"}).when("/store/storesCollection/storeName/:storeName/:location/:slug?",{templateUrl:"app/store/views/storesNameCollection.html",controller:"StoreNameCollectionController",controllerAs:"sncc"}).when("/store/storesCollection/category/:category/:location/:slug?",{templateUrl:"app/store/views/storesCategoryCollection.html",controller:"StoreCategoryCollectionController",controllerAs:"sccc"}).when("/store/storesCollection/location/:location/:slug?",{templateUrl:"app/store/views/storesLocationCollection.html",controller:"StoreLocationCollectionController",controllerAs:"slcc"}).when("/store/singleStore/:storeId/:myslug?",{templateUrl:"app/store/views/singleStore.html",controller:"SingleStoreController",controllerAs:"ssc"})}]),angular.module("app.user",[]).config(["$routeProvider",function(e){e.when("/user/:userId",{templateUrl:"app/user/views/userProfilePage.html",controller:"UserPageController",controllerAs:"upc"})}]),function(e){"use strict";e.module("app.common",[])}(window.angular),function(e){"use strict";function t(e,t){this.getCities=function(){var o=this;return o.cityData=e.get(t.baseUrl+"store/cities"),o.cityData}}function o(e,t){this.getSearches=function(o){var r=this;r.searchesData=void 0;var i=e.baseUrl+"search/searches/"+o;return r.searchesData=t.get(i),r.searchesData}}function r(e){this.getService=function(t){return e.get(t)}}function i(){this.sortByKey=function(e,t){return e.sort(function(e,o){var r=e[t],i=o[t];return i>r?-1:r>i?1:0})}}function n(e){this.changeBrowserURLMethod=function(t,o){o&&e.path(t).search({param:o}),e.path(t)}}function s(){this.getArrayFunction=function(e,t){for(var o=[],r=e.length-1;r>=0;r--)o.push(e[r][t]);return o}}function a(){this.getUniqueCopyFunction=function(t,o){return e.forEach(t,function(e){-1==o.indexOf(e)&&o.push(e)}),o}}function c(){}function l(e){var t=e.localStorage,o={setCity:function(e){e&&t.setItem("city",JSON.stringify(e))},getCity:function(){return JSON.parse(t.getItem("city"))},isCityExists:function(){return o.getCity()?!0:!1}};return o}function u(){this.baseUrl="https://shoppinss.herokuapp.com/",this.getStoresWithCatgeoryLocation=this.baseUrl+"store/storesCollection/category/",this.getStoresWithNameLocation=this.baseUrl+"store/storesCollection/storeName/",this.getSingleStoreWithId=this.baseUrl+"store/singleStore/",this.getProductsWithCatgeoryLocation=this.baseUrl+"product/productsCollection/category/",this.getProductsWithSubCatgeoryLocation=this.baseUrl+"product/productsCollection/subCategory/",this.getProductsWithNameLocation=this.baseUrl+"product/productsCollection/productName/",this.getProductsWithStoreId=this.baseUrl+"product/productsCollection/store/",this.getSingleProductWithId=this.baseUrl+"product/singleProduct/",this.getCategoriesWithLocation=this.baseUrl+"categories/location"}function d(e,t){function o(o){return e.get(t.baseUrl+"store/localities/"+o)}this.getCityLocalities=o}function g(e,t){function o(o){return e.get(t.baseUrl+"store/categories/"+o)}this.getCityCategories=o}function p(e,t){function o(o){return e.get(t.baseUrl+"product/localities/"+o)}this.getCityLocalities=o}function f(e,t){function o(o){return e.get(t.baseUrl+"product/categories/"+o)}this.getCityCategories=o}function h(e,t){function o(o){return e.get(t.baseUrl+"product/subCategories/"+o)}this.getCitySubCategories=o}e.module("app.common").service("citiesService",["$http","baseUrlService",t]).service("getCategoryService",[function(){}]).service("searchService",["baseUrlService","$http",o]).service("httpService",["$http",r]).service("sortService",[i]).service("changeBrowserURL",["$location",n]).service("arrayObjectMapper",[s]).service("arrayUniqueCopy",[a]).service("userLocationService",[c]).service("baseUrlService",[u]).service("getCityLocalitiesService",["$http","baseUrlService",d]).service("getCityCategoriesService",["$http","baseUrlService",g]).service("getCityProductLocalitiesService",["$http","baseUrlService",p]).service("getCityProductCategoriesService",["$http","baseUrlService",f]).service("getCityProductSubCategoriesService",["$http","baseUrlService",h]).factory("cityStorage",["$window",l])}(window.angular),function(e){function t(e,t){return{restrict:"A",link:function(e,o,r){var i=t.path();$(o[0]).on("click",function(){-1==i.indexOf("/home")&&$(r.toggleElement).slideToggle()});-1==i.indexOf("/home")}}}function o(e,t){return{restrict:"A",link:function(e,o,r){var i=0,n=t.path();-1==n.indexOf("/home")&&$(window).on("scroll",function(){if(windowWidth=window.innerWidth?window.innerWidth:$(window).width(),-1==n.indexOf("/home")&&$(window).scrollTop()>170&&windowWidth<=601&&-1==n.indexOf("/home")&&$(window).scrollTop()>170){var t=$(this).scrollTop();t>i?$(".scrollUpSearch").slideUp("fast"):$(".scrollUpSearch").slideDown("fast"),i=t,e.$apply()}})}}}function r(e,t){return{restrict:"A",link:function(e,t,o){$(t).on("click",function(){windowWidth=window.innerWidth?window.innerWidth:$(window).width(),windowWidth<=961&&($(o.toggleMobile).slideToggle(),e.$apply())})}}}function i(){return{restrict:"E",replace:!0,scope:{loading:"=loading"},template:'<div class="ajaxLoadingSpinnerDiv"><div class="ajaxLoadingSpinner"></div></div>',link:function(e,t,o){e.$watch("loading",function(e){e?$(t).show():$(t).hide()})}}}function n(){return{restrict:"EA",replace:!0,scope:{smallLoading:"=smallLoading"},template:'<span style="position:relative"><div class="spinner"></div></span>',link:function(e,t,o){e.$watch("smallLoading",function(e){e?$(t).show():$(t).hide()})}}}function s(){return{restrict:"A",link:function(e,t,o){$("meta[name=Keywords]").attr("content"),$("meta[name=Description]").attr("content");console.log()}}}function a(){return{restrict:"E",scope:{upFn:"&upFn",downFn:"&downFn",upvChk:"&upvChk",smallLoading:"=smallLoading"},templateUrl:"app/reviews/views/likeReview.html"}}function c(){return{restrict:"E",scope:{upFn:"&upFn",downFn:"&downFn",upvChk:"&upvChk",smallLoading:"=smallLoading"},templateUrl:"app/user/views/userFollow.html"}}e.module("app.common").directive("toggleElement",["$window","$location",t]).directive("scrollDown",["$window","$location",o]).directive("toggleMobile",["$window","$location",r]).directive("loadingDirective",[i]).directive("metaTags",[s]).directive("likeDirective",[a]).directive("followDirective",[c]).directive("smallLoadingDirective",[n]).directive("bindHtmlCompile",["$compile",function(e){return{restrict:"A",link:function(t,o,r){t.$watch(function(){return t.$eval(r.bindHtmlCompile)},function(i){o.html(i&&i.toString());var n=t;r.bindHtmlScope&&(n=t.$eval(r.bindHtmlScope)),e(o.contents())(n)})}}}])}(window.angular),function(e){"use strict";e.module("app.review",[])}(window.angular),function(e){"use strict";function t(e,t,o,r,i){function n(){e.path("/signup")}function s(){o.login(a.user).then(function(e){r.setUser(e.data.user),console.log("history url"),alert("Login successfull"),window.history.back()},function(e){console.log(e)})}var a=this;a.user={},a.submitLogin=s,a.signUp=n,console.log("form thr ontdg"),a.authenticate=function(t){o.authenticate(t),e.path("/")}}e.module("authModApp").controller("LoginController",["$location","$window","$auth","userData","baseUrlService",t])}(window.angular),function(e){"use strict";function t(e,t,o,r){function i(){o.signup(n.user).then(function(e){console.log(e),o.setToken(e.data.token),t.setUser(e.data.user),window.history.back()},function(e){console.log(e)})}var n=this;n.user={},n.formSubmit=i}e.module("authModApp").controller("RegisterCtrl",["$scope","userData","$auth","$location",t])}(window.angular),function(e){"use strict";e.module("authModApp").directive("sameAs",function(){return{require:"ngModel",restrict:"EA",link:function(e,t,o,r){function i(t){var i=t===e.$eval(o.sameAs);return r.$setValidity("equal",i),i?t:void 0}console.log(o),console.log(o.sameAs),r.$parsers.push(i),r.$formatters.push(i),e.$watch(o.sameAs,function(){r.$setViewValue(r.$viewValue)})}}})}(window.angular),function(e){"use strict";function t(e,t,o,r,i,n){var s=e.localStorage,a={},c={setUser:function(e){if(console.log("called me yo"),e)s.setItem("user",JSON.stringify(e));else{var t=o.getPayload().sub;t&&r.get(i.baseUrl+"authenticate/user/"+t).then(function(e){console.log("without param"),c.isUserExists()&&s.removeItem("user"),s.setItem("user",JSON.stringify(e.data.user))},function(e){console.log(e)})}console.log(s.getItem("user"))},getUser:function(){return JSON.parse(s.getItem("user"))},removeUser:function(){a=null,s.removeItem("user")},isUserExists:function(){return c.getUser()?!0:!1},getUserPage:function(e){var t="/user/"+e;n.changeBrowserURLMethod(t)}};return c}e.module("authModApp").factory("userData",["$window","$route","$auth","$http","baseUrlService","changeBrowserURL",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,i,n){function s(){t.changeBrowserURLMethod("/")}function a(){t.changeBrowserURLMethod("/login")}function c(e){o.authenticate(e).then(function(e){n.setUser(),alert("login with facebook successfull"),i.reload()})}function l(){o.logout(),n.removeUser(),s()}var u=this;u.toHomePage=s,u.authenticate=c,u.authLogout=l,u.loginPage=a,u.isAuth=o.isAuthenticated()}e.module("app.home").controller("AuthController",["$scope","changeBrowserURL","$auth","$window","$route","userData",t])}(window.angular),function(e){"use strict";function t(t,o,r,i,n,s,a,c,l){function u(e){return function(){c(e).toggle().then(function(){l.debug("toggle "+e+" is done")})}}function d(){r.changeBrowserURLMethod("/")}function g(e){i.authenticate(e),d()}function p(){i.logout(),d()}function f(o){(s("sm")||s("xs"))&&t.customFullscreen;n.show({controller:"ModalFormLoginController",templateUrl:"app/home/views/modalFormLogin.html",parent:e.element(document.body),targetEvent:o,clickOutsideToClose:!0,fullscreen:h.customFullscreen}).then(function(e){t.status='You said the information was "'+e+'".'},function(){t.status="You cancelled the dialog."}),t.$watch(function(){return s("md")||s("xl")},function(e){h.customFullscreen=e===!0})}var h=this;h.toHomePage=d,h.authenticate=g,h.authLogout=p,h.showAdvanced=f,h.customFullscreen=void 0,h.isAuth=i.isAuthenticated(),h.isOpenLeft=function(){return c("left").isOpen()},h.toggleLeft=u("left")}e.module("app.home").controller("HeaderController",["$scope","userData","changeBrowserURL","$auth","$mdDialog","$mdMedia","$timeout","$mdSidenav","$log",t])}(window.angular),function(e){"use strict";function t(t,o,r,i,n,s,a,c){function l(){g.getCategories()}function u(e){var t=s.getUserLocation(),o=e+"-stores-in-"+t,r="/store/storesCollection/category/"+e+"/"+t+"/"+o;a.changeBrowserURLMethod(r)}function d(){g.pageNo=g.pageNo+1;var t=c.baseUrl+"store/categories/"+g.pageNo;o.get(t).then(function(t){e.forEach(t.data.docs,function(e){g.cateList=i.getUniqueCopyFunction(e.category,g.cateList)})},function(e){})}var g=this;g.cateList=[],g.categLoadMore=!1,g.pageNo=0,g.getCategories=d,g.categoryLinkClicked=u,l()}function o(e,t,o,r){}e.module("app.home").controller("HomeController",["$scope","citiesService","searchService","changeBrowserURL",o]).controller("CategoryListController",["$scope","$http","getCategoryService","arrayUniqueCopy","arrayObjectMapper","userLocationService","changeBrowserURL","baseUrlService",t])}(window.angular),function(e){"use strict";function t(e,t,o){this.close=function(){t("left").close().then(function(){o.debug("close RIGHT is done")})}}e.module("app.home").controller("HomeLeftController",["$timeout","$mdSidenav","$log",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,i,n,s){function a(e){var t=e.userSearchString.split("#&#")[1],o=e.userSearchString.split("#&#")[0],r=p.selectedItem;p.slug=o+"-"+t.split("-")[0]+"s-in-"+r,console.log(t),"store"==t?p.url="/store/storesCollection/storeName/":"store-category"==t?p.url="/store/storesCollection/category/":"product"==t?p.url="/productsCollectionName/":"product-category"==t?p.url="/productsCollectionCategory/":"product-subcategory"==t?p.url="/productsCollectionSubCategory/":"All products in"==t.trim()?d():u(),n.changeBrowserURLMethod(p.url+o+"/"+r+"/"+p.slug),console.log(p.url+o+"/"+r+"/"+p.slug)}function c(e){p.loading=!0,o.setCity(e),i.getSearches(e).then(function(e){var t={userSearchString:"#&#All stores in #&#"+p.selectedItem},o={userSearchString:"#&#All products in #&#"+p.selectedItem};p.userSearches=[t,o];for(var r=e.data.length-1;r>=0;r--)p.userSearches.push(e.data[r]);p.loading=!1},function(e){console.log(e)})}function l(){-1!=p.cities.indexOf(p.selectedItem)&&(p.userSearchText&&0!==p.userSearchText.length||u())}function u(){p.url="/store/storesCollection/location";var e=p.selectedItem;p.slug="stores-in-"+e,n.changeBrowserURLMethod(p.url+"/"+e+"/"+p.slug)}function d(){p.url="/productsCollectionLocation";var e=p.selectedItem;p.slug="products-in-"+e,n.changeBrowserURLMethod(p.url+"/"+e+"/"+p.slug)}function g(){r.getCities().then(function(e){p.cities=e.data},function(e){p.cities=e})}var p=this;p.selectedItem=t.location?t.location:o.isCityExists()?o.getCity():"hyderabad",g(),p.userSearches=[],p.selectedItemChange=c,p.userSearchItemChange=a,p.locationSearch=l,p.selectedItemChange(p.selectedItem)}e.module("app.home").controller("SearchBoxController",["$scope","$routeParams","cityStorage","citiesService","searchService","changeBrowserURL","userLocationService",t])}(window.angular),function(e){function t(){}e.module("app.product").controller("ProductCategoryCollectionController",[t])}(window.angular),function(e){"use strict";function t(e,t,o,r,i,n,s){function a(e,t){var o="product/singleProduct/"+e._id;t&&i.changeBrowserURLMethod(o,t),i.changeBrowserURLMethod(o)}function c(){u.loading=!0,u.pageNo=u.pageNo+1;var e=r.location,t="";if(-1!=o.absUrl().indexOf("/productsCollectionCategory/")){var i=r.category;t="product/products/category/"+i+"/"+e+"/"+u.pageNo}else if(-1!=o.absUrl().indexOf("/productsCollectionSubCategory/")){var n=r.subCategory;t="product/products/subCategory/"+n+"/"+e+"/"+u.pageNo}else if(-1!=o.absUrl().indexOf("/productsCollectionName/")){var a=r.productName;t="product/products/name/"+a+"/"+e+"/"+u.pageNo}else-1!=o.absUrl().indexOf("/productsCollectionLocation/")&&(t="product/products/location/"+e+"/"+u.pageNo);s.getProductCollection(t,u.paramData).then(function(e){if(u.totalProducts=e.data.total,console.log(e),0===u.productsList.length){for(var t=[],o=e.data.docs.length-1;o>=0;o--)t.push(e.data.docs[o]);u.productsList=t}else{u.paramData&&1==u.pageNo&&(u.productsList=[]);for(var r=e.data.docs.length-1;r>=0;r--)u.productsList.push(e.data.docs[r])}u.loading=!1},function(e){console.log(e)})}function l(){u.getProductsCollection()}var u=this;u.pageNo=0,u.productsList=[],console.log(r),u.getSingleProduct=a,u.getProductsCollection=c,u.productsSearchHeader=r.slug,l(),e.$on("parent",function(e,t){u.pageNo=0,u.paramData=t,u.getProductsCollection()})}e.module("app.product").controller("ProductListController",["$scope","$auth","$location","$routeParams","changeBrowserURL","baseUrlService","getProductCollectionService",t])}(window.angular),function(e){function t(){}e.module("app.product").controller("ProductNameCollectionController",[t])}(window.angular),function(e){function t(e,t,o,r,i){function n(){u.majorFilter.area=u.areaModel.area,l(u.majorFilter)}function s(){delete u.majorFilter.area,u.areaModel={},l(u.majorFilter)}function a(){u.majorFilter.category=u.categoryModel.category,l(u.majorFilter)}function c(){delete u.majorFilter.category,u.categoryModel={},l(u.majorFilter)}function l(t){e.$broadcast("parent",t)}var u=this;u.areaModel={},u.categoryModel={},u.launchFilterEvent=l,u.areaRadioClicked=n,u.categoryRadioClicked=a,u.majorFilter={},u.clearAreaFilters=s,u.clearCategoryFilters=c;var d=t.location;o.getCityLocalities(d).then(function(e){u.areas=e.data},function(e){}),r.getCityCategories(d).then(function(e){u.categories=e.data},function(e){console.log(e)})}e.module("app.product").controller("ProductsLocationController",["$scope","$routeParams","getCityProductLocalitiesService","getCityProductCategoriesService","getCityProductSubCategoriesService",t])}(window.angular),function(e){function t(){}e.module("app.product").controller("ProductSubCategoryCollectionController",[t])}(window.angular),function(e){"use strict";function t(e,t,o,r,i,n){function s(){o.getSingleProduct(n.productId).then(function(e){a.product=e.data})}var a=this;a.authCheck=t.isAuthenticated(),s()}e.module("app.product").controller("SingleProductController",["$scope","$auth","getProductsService","$location","scrollToIdService","$routeParams",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,i,n,s){function a(e){var t="/product/singleProduct/"+e;s.changeBrowserURLMethod(t)}function c(){n.getStoreProductsList(i.storeId).then(function(e){l.storeProductsList=e.data.docs})}var l=this;l.storeProductsList=[],l.pageNo=0,l.getSingleProduct=a,c()}e.module("app.product").controller("StoreProductListController",["$scope","$auth","$location","scrollToIdService","$routeParams","getProductsService","changeBrowserURL",t])}(window.angular),function(e){"use strict";function t(e,t){function o(o,r){return e.get(t.baseUrl+o,{params:r})}this.getProductCollection=o}e.module("app.product").service("getProductCollectionService",["$http","baseUrlService",t])}(window.angular),function(e){"use strict";function t(e,t,o,r){function i(t){var r=1;return e.get(o.baseUrl+"product/products/store/"+t+"/"+r)}function n(t){return e.get(o.baseUrl+"product/products/singleProduct/"+t)}function s(e,t){var o="product/singleProduct/"+e._id+"/"+(e.myslug||" ");t&&r.changeBrowserURLMethod(o,t),r.changeBrowserURLMethod(o)}this.getStoreProductsList=i,this.getSingleProduct=n,this.getSingleProductPage=s}e.module("app.product").service("getProductsService",["$http","storeData","baseUrlService","changeBrowserURL",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,i,n,s){function a(){p.getProductReviews()}function c(){n.getProductReviews().then(function(e){p.reviewList=e.data},function(e){})}function l(e){for(var t=parseInt(e.rating),o=[],r=0;t>r;r++)o.push(r);return o}function u(e){for(var t=e.upvotes,o=0;o<t.length;o++)if(-1!=p.userUpvotes.indexOf(t[o]))return p.currentUpvoteId=t[o],!0}function d(e){p.smallLoadingModel[e._id]=!0,n.submitUserReviewUpvote({reviewId:e._id,productId:o.productId,userId:s.getUser()._id}).then(function(t){e.upvotes.push(t.data.id),p.userUpvotes.push(t.data.id),s.setUser(),p.smallLoadingModel[e._id]=!1})}function g(e){p.smallLoadingModel[e._id]=!0,n.deleteUserReviewUpvote({reviewId:e._id,productId:o.productId,userId:s.getUser()._id}).then(function(t){e.upvotes.splice(e.upvotes.indexOf(t.data.id),1),s.setUser(),p.smallLoadingModel[e._id]=!1})}var p=this;p.activate=a,p.smallLoadingModel={},p.getProductReviews=c,p.getRating=l,p.userReviewUpvoted=u,p.authCheck=t.isAuthenticated(),p.submitUserReviewUpvote=d,p.deleteUserReviewUpvote=g,p.getUserPage=s.getUserPage,p.authCheck&&(p.userUpvotes=s.getUser().upvotes),p.submitUserReviewUpvote=d,p.activate()}e.module("app.review").controller("ProductReviewListController",["$scope","$auth","$routeParams","$route","changeBrowserURL","reviewService","userData",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,i){function n(e){var t=6-e.currentTarget.attributes.value.nodeValue;a.review.rating=t}function s(){t.storeId?i.submitStoreReview(a.review).then(function(e){r.setUser(),o.reload()},function(e){}):t.productId&&i.submitProductReview(a.review).then(function(e){r.setUser(),o.reload()},function(e){})}var a=this;a.review={},a.user={},t.storeId?a.review.storeId=t.storeId:t.productId&&(a.review.productId=t.productId),a.ratingClick=n,r.getUser()?(a.review.userId=r.getUser()._id,a.user.picture=r.getUser().picture,a.user.displayName=r.getUser().displayName):a.review.userId=e.getPayload().sub,a.submitReview=s}e.module("app.review").controller("ReviewSubmitController",["$auth","$routeParams","$route","userData","reviewService",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,i,n){function s(){g.getStoreReviews()}function a(){i.getStoreReviews().then(function(e){g.reviewList=e.data},function(e){})}function c(e){for(var t=parseInt(e.rating),o=[],r=0;t>r;r++)o.push(r);return o}function l(e){for(var t=e.upvotes,o=0;o<t.length;o++)if(-1!=g.userUpvotes.indexOf(t[o]))return g.currentUpvoteId=t[o],!0}function u(e){g.smallLoadingModel[e._id]=!0,i.submitUserReviewUpvote({reviewId:e._id,storeId:o.storeId,userId:n.getUser()._id}).then(function(t){e.upvotes.push(t.data.id),g.userUpvotes.push(t.data.id),n.setUser(),g.smallLoadingModel[e._id]=!1})}function d(e){g.smallLoadingModel[e._id]=!0,i.deleteUserReviewUpvote({reviewId:e._id,storeId:o.storeId,userId:n.getUser()._id}).then(function(t){e.upvotes.splice(e.upvotes.indexOf(t.data.id),1),n.setUser(),g.smallLoadingModel[e._id]=!1})}var g=this;g.activate=s,g.smallLoadingModel={},g.getStoreReviews=a,g.getRating=c,g.userReviewUpvoted=l,g.authCheck=t.isAuthenticated(),g.submitUserReviewUpvote=u,g.deleteUserReviewUpvote=d,g.getUserPage=n.getUserPage,g.authCheck&&(g.userUpvotes=n.getUser().upvotes),g.submitUserReviewUpvote=u,g.activate()}e.module("app.review").controller("StoreReviewListController",["$scope","$auth","$routeParams","$route","reviewService","userData",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,i,n){function s(){g.getUserReviews()}function a(){o.getUserReviews().then(function(e){g.reviewList=e.data},function(e){})}function c(e){for(var t=parseInt(e.rating),o=[],r=0;t>r;r++)o.push(r);return o}function l(e){for(var t=e.upvotes,o=0;o<t.length;o++)if(-1!=g.userUpvotes.indexOf(t[o]))return g.currentUpvoteId=t[o],!0}function u(e){g.smallLoadingModel[e._id]=!0,o.submitUserReviewUpvote({reviewId:e._id,userId:r.getUser()._id}).then(function(t){e.upvotes.push(t.data.id),g.userUpvotes.push(t.data.id),r.setUser(),g.smallLoadingModel[e._id]=!1})}function d(e){g.smallLoadingModel[e._id]=!0,o.deleteUserReviewUpvote({reviewId:e._id,userId:r.getUser()._id}).then(function(t){e.upvotes.splice(e.upvotes.indexOf(t.data.id),1),r.setUser(),g.smallLoadingModel[e._id]=!1})}var g=this;g.activate=s,g.smallLoadingModel={},g.getUserReviews=a,g.getRating=c,g.userReviewUpvoted=l,g.authCheck=t.isAuthenticated(),g.submitUserReviewUpvote=u,g.deleteUserReviewUpvote=d,g.getUserPage=r.getUserPage,g.getSingleStorePage=i.getSingleStorePage,g.getSingleProductPage=n.getSingleProductPage,g.authCheck&&(g.userUpvotes=r.getUser().upvotes),g.submitUserReviewUpvote=u,g.activate()}e.module("app.review").controller("UserReviewListController",["$scope","$auth","reviewService","userData","getSingleStore","getProductsService",t])}(window.angular),function(e){"use strict";function t(e,t,o){function r(t){return e.post(o.baseUrl+"review/reviews/store/"+t.storeId,t)}function i(){var r=t.storeId;return e.get(o.baseUrl+"review/reviews/store/"+r)}function n(t){return e.post(o.baseUrl+"review/reviews/product/"+t.productId,t)}function s(){var r=t.productId;return e.get(o.baseUrl+"review/reviews/product/"+r)}function a(t){return console.log(t),e.post(o.baseUrl+"upvote/upvotes/review/",t)}function c(t){return e["delete"](o.baseUrl+"upvote/upvotes/review/",{params:t})}function l(){var r=t.userId;return e.get(o.baseUrl+"user/userReviews/"+r)}var u=this;u.submitStoreReview=r,u.getStoreReviews=i,u.submitUserReviewUpvote=a,u.deleteUserReviewUpvote=c,u.getProductReviews=s,u.submitProductReview=n,u.getUserReviews=l}e.module("app.review").service("reviewService",["$http","$routeParams","baseUrlService",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,i,n,s){function a(){return Object.keys(c.storeData.address).map(function(e){return c.storeData.address[e]}).join(" ")}var c=this;c.storeData={},c.loading=!0,c.authCheck=t.isAuthenticated(),c.getAddressString=a,s.getStore(i.storeId).then(function(e){n.setStore(e.data),c.storeData=e.data,c.loading=!1,o.search().param&&r.scrollToId(o.search().param)}),s.getStoreRating(i.storeId).then(function(e){c.storeData.storeRatingAvg=e.data})}e.module("app.store").controller("SingleStoreController",["$scope","$auth","$location","scrollToIdService","$routeParams","storeData","getSingleStore",t])}(window.angular),function(e){function t(e,t,o,r){function i(){a.majorFilter.area=a.areaModel.area,s(a.majorFilter)}function n(){delete a.majorFilter.area,a.areaModel={},s(a.majorFilter)}function s(t){e.$broadcast("parent",t)}var a=this;a.areaModel={},a.launchFilterEvent=s,a.areaRadioClicked=i,a.majorFilter={},a.clearAreaFilters=n;var c=t.location;o.getCityLocalities(c).then(function(e){a.areas=e.data},function(e){}),r.getCityCategories(c).then(function(e){a.categories=e.data},function(e){console.log(e)})}e.module("app.store").controller("StoreCategoryCollectionController",["$scope","$routeParams","getCityLocalitiesService","getCityCategoriesService",t])}(window.angular),function(e){function t(e,t){var o=this;o.address={},o.SendData=function(){data={},data.name=o.name,data.city=o.address.city,data.address=o.address,data.category=o.categoryString.split(",");var r={headers:{"Content-Type":"application/json"}};t.post(e.baseUrl+"store/store",data,r).then(function(e){},function(e){console.log(e)})}}e.module("app.store").controller("StoreController",["baseUrlService","$http",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,i,n){function s(e,t){var r="store/singleStore/"+e._id+"/"+e.myslug;t&&o.changeBrowserURLMethod(r,t),o.changeBrowserURLMethod(r)}function a(){l.loading=!0,l.pageNo=l.pageNo+1;var e=t.location,o="";if(-1!=r.absUrl().indexOf("/category/")){var i=t.category;o="store/storesCollection/category/"+i+"/"+e+"/"+l.pageNo}else if(-1!=r.absUrl().indexOf("/storeName/")){var s=t.storeName;o="store/storesCollection/storeName/"+s+"/"+e+"/"+l.pageNo}else o="store/storesCollection/stores/"+e+"/"+l.pageNo;n.getStoreCollection(o,l.paramData).then(function(e){if(l.totalStores=e.data.total,console.log(e),0===l.storesList.length){for(var t=[],o=e.data.docs.length-1;o>=0;o--)t.push(e.data.docs[o]);l.storesList=t}else{l.paramData&&1==l.pageNo&&(l.storesList=[]);for(var r=e.data.docs.length-1;r>=0;r--)l.storesList.push(e.data.docs[r])}l.loading=!1},function(e){console.log(e)})}function c(){l.getStoresCollection()}var l=this;l.pageNo=0,l.storesList=[],l.getSingleStore=s,l.getStoresCollection=a,l.storesSearchHeader=t.slug,c(),e.$on("parent",function(e,t){l.pageNo=0,l.paramData=t,l.getStoresCollection()})}e.module("app.store").controller("StoreListController",["$scope","$routeParams","changeBrowserURL","$location","baseUrlService","getStoreCollectionService",t])}(window.angular),function(e){function t(e,t,o,r){function i(){l.majorFilter.area=l.areaModel.area,c(l.majorFilter)}function n(){delete l.majorFilter.area,l.areaModel={},c(l.majorFilter)}function s(){l.majorFilter.category=l.categoryModel.category,c(l.majorFilter)}function a(){delete l.majorFilter.category,l.categoryModel={},c(l.majorFilter)}function c(t){e.$broadcast("parent",t)}var l=this;l.areaModel={},l.categoryModel={},l.launchFilterEvent=c,l.areaRadioClicked=i,l.categoryRadioClicked=s,l.majorFilter={},l.clearAreaFilters=n,l.clearCategoryFilters=a;var u=t.location;o.getCityLocalities(u).then(function(e){l.areas=e.data},function(e){}),r.getCityCategories(u).then(function(e){l.categories=e.data},function(e){console.log(e)})}e.module("app.store").controller("StoreLocationCollectionController",["$scope","$routeParams","getCityLocalitiesService","getCityCategoriesService",t])}(window.angular),function(e){function t(){}e.module("app.store").controller("StoreNameCollectionController",[t])}(window.angular),function(e){function t(e,t,o,r,i){function n(){i.getVisit(c.getVisitParamObj).then(function(e){e.data.length&&(c.visitCheck=!0,c.userVisitId=e.data[0]._id)})}function s(){c.visitCheck?(c.visit.userId=r.getUser()?r.getUser()._id:t.getPayload().sub,console.log("************************************"),console.log(c.visit),i.submitVisit(c.visit).then(function(e){console.log(e),r.setUser()},function(e){console.log(e)})):i.deleteVisit(c.userVisitId).then(function(e){console.log(e),r.setUser()},function(e){console.log(e)})}function a(){r.setUser(),n()}var c=this;c.visit={},c.visitCheck=!1,c.getVisitParamObj={},c.getVisitParamObj.userId=r.getUser()._id,a(),c.toggleVisitCheck=s,c.userStoreVisited=n,o.storeId?(c.visit.storeId=o.storeId,c.getVisitParamObj.storeId=o.storeId):o.productId&&(c.visit.productId=o.productId,c.getVisitParamObj.productId=o.productId)}e.module("app.store").controller("UserStoreVisitController",["$scope","$auth","$routeParams","userData","userVisitService",t])}(window.angular),function(e){function t(e,t){return{restrict:"E",templateUrl:"app/store/views/filterDirectiveTemplate.html",scope:{filterName:"@filterName",radioModel:"=radioModel",radioChange:"&radioChange",radioRepeat:"=radioRepeat",clearClick:"&clearClick"},link:function(e,t,o){}}}function o(e,t){return{restrict:"A",link:function(e,t,o){$(t).on("click",function(){$(this).addClass(o.addClass)})}}}function r(e,t){return{restrict:"A",link:function(e,t,o){$(t).on("click",function(){$(this).siblings().removeClass(o.siblingRemoveClass)})}}}function i(e,t){return{restrict:"A",link:function(e,t,o){$(t).on("click",function(){$(this).siblings(".filterDirectiveRadioGroup").find(".filterRadioButton").removeClass(o.removeClass)})}}}e.module("app.store").directive("filterDirective",["$window","$location",t]).directive("addClass",["$window","$location",o]).directive("removeClass",["$window","$location",i]).directive("siblingRemoveClass",["$window","$location",r]);

}(window.angular),function(e){function t(e){return{restrict:"A",link:function(t,o,r){$(o).on("click",function(){e.scrollToId(r.scrollToId)})}}}e.module("app.store").directive("scrollToId",["scrollToIdService",t])}(window.angular),function(e){"use strict";function t(e,t,o){function r(t,r){return e.get(o.baseUrl+t,{params:r})}this.getStoreCollection=r}e.module("app.store").service("getStoreCollectionService",["$http","storeData","baseUrlService",t])}(window.angular),function(e){"use strict";function t(e,t,o,r){function i(t){return e.get(o.baseUrl+"store/singleStore/"+t)}function n(t){return e.get(o.baseUrl+"review/ratings/store/"+t)}function s(e,t){var o="store/singleStore/"+e._id+"/"+(e.myslug||" ");t&&r.changeBrowserURLMethod(o,t),r.changeBrowserURLMethod(o)}this.getStore=i,this.getStoreRating=n,this.getSingleStorePage=s}e.module("app.store").service("getSingleStore",["$http","storeData","baseUrlService","changeBrowserURL",t])}(window.angular),function(e){"use strict";function t(){function e(e){var t=$("body");console.log("Inside the service of scroll");var o=$("#"+e);console.log(o),t.animate({scrollTop:o.offset().top})}this.scrollToId=e}e.module("app.store").service("scrollToIdService",[t])}(window.angular),function(e){"use strict";function t(e){var t=e.localStorage,o={setStore:function(e){console.log("****from the storeData factory*****"),console.log(e),t.setItem("store",JSON.stringify(e))},getStore:function(){return JSON.parse(t.getItem("store"))},removeStore:function(){t.removeItem("store")}};return o}e.module("app.store").factory("storeData",["$window",t])}(window.angular),function(e){"use strict";function t(e,t){function o(o){return e.get(t.baseUrl+"visit/visited",{params:o})}function r(o){return e.post(t.baseUrl+"visit/visits/store",o)}function i(o){return e["delete"](t.baseUrl+"visit/visits/"+o)}this.submitVisit=r,this.deleteVisit=i,this.getVisit=o}e.module("app.store").service("userVisitService",["$http","baseUrlService",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,i){function n(){s.loading=!0,i.getSingleUserActivity(r.userId).then(function(e){s.activityData=e.data,s.loading=!1})}var s=this;s.loading=!0,n()}e.module("app.user").controller("UserActivityListController",["$scope","$http","$location","$routeParams","activityService",t])}(window.angular),function(e){"use strict";function t(e,t,o){function r(){i.loading=!0,i.authCheck?o.getUserFollowingActivity(t.getPayload().sub).then(function(e){i.activityData=e.data,i.loading=!1}):o.getAllActivity().then(function(e){i.activityData=e.data,i.loading=!1})}var i=this;i.loading=!0,i.authCheck=t.isAuthenticated(),r()}e.module("app.user").controller("UserFeedController",["$scope","$auth","activityService",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,i,n){function s(){a.loading=!0,n.getUserFollowers(r.userId).then(function(e){a.followersList=e.data,a.loading=!1})}var a=this;s(),a.loading=!0,a.authCheck=t.isAuthenticated(),a.followersList=[],a.getUserPage=i.getUserPage}e.module("app.user").controller("UserFollowersController",["$scope","$auth","$location","$routeParams","userData","userService",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,i,n){function s(){a.loading=!0,n.getUserFollowing(r.userId).then(function(e){a.followingList=e.data,a.loading=!1})}var a=this;s(),a.loading=!0,a.authCheck=t.isAuthenticated(),a.followingList=[],a.getUserPage=i.getUserPage}e.module("app.user").controller("UserFollowingController",["$scope","$auth","$location","$routeParams","userData","userService",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,i,n){function s(){return r.userId==i.getUser()._id}function a(e){n.submitUserFollow(i.getUser()._id,e).then(function(e){i.setUser()},function(e){})}function c(e){n.deleteUserFollow(i.getUser()._id,e).then(function(t){i.getUser().following.indexOf(e);i.setUser()},function(e){})}function l(e){return-1!=i.getUser().following.indexOf(e)?!0:!1}function u(){d.loading=!0,n.getSingleUser(r.userId).then(function(e){d.currentUserData=e.data,d.loading=!1})}var d=this;u(),d.currentUserData={},d.loading=!0,d.authCheck=t.isAuthenticated(),d.submitUserFollow=a,d.deleteUserFollow=c,d.userFollowed=l,d.currentUser=s}e.module("app.user").controller("UserPageController",["$scope","$auth","$location","$routeParams","userData","userService",t])}(window.angular),function(e){"use strict";function t(e,t,o,r){var i=this;i.uploadFiles=function(e,r){i.f=e,i.errFile=r&&r[0],e&&(e.upload=t.upload({url:"https://shoppinss.herokuapp.com/user/upload/profileImage/"+o.getUser()._id,data:{file:e}}),e.upload.then(function(t){e.result=t.data,console.log(t),o.setUser()}))}}e.module("app.user").controller("UserProfileImageController",["$scope","Upload","userData","$timeout",t])}(window.angular),function(e){"use strict";function t(e,t,o,r,i,n){function s(){}s()}e.module("app.user").controller("UserStatisticsController",["$scope","$auth","$location","$routeParams","userData","userService",t])}(window.angular),function(e){"use strict";function t(e,t){function o(o){return e.get(t.baseUrl+"activity/singleUserActivity/"+o)}function r(){return e.get(t.baseUrl+"activity/allActivity/")}function i(o){return e.get(t.baseUrl+"activity/userFollowingActivity/"+o)}this.getSingleUserActivity=o,this.getAllActivity=r,this.getUserFollowingActivity=i}e.module("app.user").service("activityService",["$http","baseUrlService",t])}(window.angular),function(e){"use strict";function t(e,t){function o(o){return e.get(t.baseUrl+"user/singleUser/"+o)}function r(o){return e.get(t.baseUrl+"review/ratings/store/"+o)}function i(o,r){return e.post(t.baseUrl+"user/submitFollow/"+o+"/"+r)}function n(o,r){return e.post(t.baseUrl+"user/deleteFollow/"+o+"/"+r)}function s(o,r){return e.get(t.baseUrl+"user/checkFollow/"+o+"/"+r)}function a(o){return e.get(t.baseUrl+"user/userFollowers/"+o)}function c(o){return e.get(t.baseUrl+"user/userFollowing/"+o)}this.getSingleUser=o,this.getStoreRating=r,this.submitUserFollow=i,this.deleteUserFollow=n,this.checkUserFollow=s,this.getUserFollowers=a,this.getUserFollowing=c}e.module("app.user").service("userService",["$http","baseUrlService",t])}(window.angular);